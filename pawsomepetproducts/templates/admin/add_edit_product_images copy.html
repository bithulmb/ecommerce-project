{% extends 'admin/adminbase.html' %}

{% block csslinking %}

<script>


</script>



{% endblock %}

{% block content %}
{% load crispy_forms_tags %}





<section class="content-main">

                {% if messages %}
                 <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
                 {% for message in messages %}
                     {{message}}
                 {% endfor %}                      
                 <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                 </div>
                 {% endif %}

    <div class="card mx-auto" style="max-width:920px; margin-top:40px;">
        <article class="card-body">
            <header class="mb-5"><h2 class="text-center">Add/Edit Images</h2></header>
            <h6 class="my-3">Variant : {{ variant.product_name.name }} - {{ variant.size }}</h6>
            
            
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
               {{ form|crispy }}
                <button class="btn btn-primary" type="submit">Add Image</button>
                <a class="btn btn-secondary" href="{% url 'admin_product_variants' %}">Back</a>
            </form>
            
            

            <hr>
            
            <h5 class="my-4">Existing Images</h5>
<div class="row">
    {% for image in images %}
        <div class="col-md-4">
            <div class="card md-4">
                <div class="img-container">
                    <img src="{{ image.images.url }}" class="card-img-top" width="360px" height="360px" alt="...">
                </div>
                <div class="card-body text-center">
                    <form method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="image_id" value="{{ image.id }}">
                        <button class="btn btn-danger btn-sm" type="submit" name="delete_image">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

            
        </article>
    </div>
    </section>
{% endblock %}